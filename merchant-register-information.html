
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>JeahLuy â€“ Merchant Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f7f8fb; }
    .wrap { max-width: 720px; margin: 30px auto; background:#fff; border:1px solid #eee; border-radius:12px; padding:20px; }
    h1 { margin:0 0 10px; }
    .row { display:flex; gap:10px; margin-bottom:10px; }
    .row input, .row select, .row textarea { flex:1; padding:10px; border:1px solid #ddd; border-radius:8px; }
    button { padding:10px 16px; border:1px solid #2c7ef8; background:#2c7ef8; color:#fff; border-radius:8px; cursor:pointer; }
    .msg { margin-top:10px; font-size:13px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Merchant Registration</h1>
    <form id="merchantForm">
      <div class="row">
        <input id="businessName" placeholder="Business Name" required />
      </div>
      <div class="row">
        <select id="businessType" required>
          <option value="">Select business type</option>
          <option value="Retail">Retail</option><option value="Wholesale">Wholesale</option>
          <option value="Manufacturing">Manufacturing</option><option value="Service">Service</option>
          <option value="Technology">Technology</option><option value="Agriculture">Agriculture</option>
          <option value="Construction">Construction</option><option value="Hospitality">Hospitality</option>
          <option value="Transportation">Transportation</option><option value="Finance">Finance</option>
          <option value="Healthcare">Healthcare</option><option value="Education">Education</option>
          <option value="Real Estate">Real Estate</option><option value="Entertainment">Entertainment</option>
          <option value="Nonprofit">Nonprofit</option>
        </select>
      </div>
      <div class="row">
        <input id="address" placeholder="Address" />
      </div>
      <div class="row">
        <select id="city" required>
          <option value="">Select a province</option>
          <option value="Phnom Penh">Phnom Penh</option><option value="Banteay Meanchey">Banteay Meanchey</option>
          <option value="Battambang">Battambang</option><option value="Kampong Cham">Kampong Cham</option>
          <option value="Kampong Chhnang">Kampong Chhnang</option><option value="Kampong Speu">Kampong Speu</option>
          <option value="Kampong Thom">Kampong Thom</option><option value="Kampot">Kampot</option>
          <option value="Kandal">Kandal</option><option value="Kep">Kep</option>
          <option value="Koh Kong">Koh Kong</option><option value="Kratie">Kratie</option>
          <option value="Mondulkiri">Mondulkiri</option><option value="Oddar Meanchey">Oddar Meanchey</option>
          <option value="Pailin">Pailin</option><option value="Preah Sihanouk">Preah Sihanouk</option>
          <option value="Preah Vihear">Preah Vihear</option><option value="Pursat">Pursat</option>
          <option value="Ratanakiri">Ratanakiri</option><option value="Siem Reap">Siem Reap</option>
          <option value="Stung Treng">Stung Treng</option><option value="Svay Rieng">Svay Rieng</option>
          <option value="Takeo">Takeo</option><option value="Tboung Khmum">Tboung Khmum</option>
        </select>
        <input id="zipcode" placeholder="Zipcode" />
      </div>
      <div class="row">
        <textarea id="description" placeholder="Business Description"></textarea>
      </div>
      <button type="submit">Submit Application</button>
      <div id="message" class="msg"></div>
    </form>
  </div>

  <!-- Firebase ESM via CDN (v10.7.1) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBKswcE3xGh4feqGZytevh6N-IyrJoJ_7g",
      authDomain: "jeahluy.firebaseapp.com",
      projectId: "jeahluy",
      storageBucket: "jeahluy.firebasestorage.app",
      messagingSenderId: "308746007810",
      appId: "1:308746007810:web:c17396303b14d61c3b3e1b",
      measurementId: "G-3RLD0EB1FT"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    const form = document.getElementById("merchantForm");
    const msg  = document.getElementById("message");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      msg.textContent = "";

      const businessName = document.getElementById("businessName").value.trim();
      const businessType = document.getElementById("businessType").value;
      const address      = document.getElementById("address").value.trim();
      const city         = document.getElementById("city").value;
      const zipcode      = document.getElementById("zipcode").value.trim();
      const description  = document.getElementById("description").value.trim();

      if (!businessName || !businessType || !city) {
        msg.textContent = "Please fill Business Name, Type and City.";
        msg.style.color = "#c53b3b";
        return;
      }

      try {
        await addDoc(collection(db, "merchantApplications"), {
          businessName, businessType, address, city, zipcode, description,
          status: "Pending Review", createdAt: new Date()
        });
        msg.textContent = "Application submitted successfully!";
        msg.style.color = "#2f9e44";
        form.reset();
      } catch (err) {
        msg.textContent = err?.message || "Submission failed.";
        msg.style.color = "#c53b3b";
      }
    });
  </script>
</body>
</html>
